webpackJsonp([13],{252:function(e,t,a){"use strict";function n(e,t){var a=t-e,n=Math.random();return e+Math.round(n*a)}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(419),a(421)),o=(a(272),a(273)),s=(a(276),a(277)),i=a(268),l=a.n(i),c=a(64),u=a.n(c),f=a(65),d=a.n(f),m=a(66),p=a.n(m),h=a(67),v=a.n(h),g=a(68),E=a.n(g),b=a(0),D=a.n(b),S=a(270),y=a(274),w=a(271),N=a(423),T=(a.n(N),{normal:0,pull:1,drop:2,loading:3,success:4,failure:5}),k={normal:0,abort:1,loading:2,success:3,failure:4,complete:5},R=function(e){function t(e){d()(this,t);var a=v()(this,(t.__proto__||u()(t)).call(this,e));return a.fetchData=function(e){a.setState(l()({},""+e,T.loading)),setTimeout(function(){if(a.mounted){for(var t=[],n=t.length,r=n;r<n+20;r++)t.push(D.a.createElement(s.a,{key:+r},"第 ",r+1," 行"));a.setState(l()({dataSource:t},""+e,T.success))}},2e3)},a.loadData=function(){a.setState({customLoading:k.loading}),setTimeout(function(){if(a.mounted){var e=n(0,5),t=a.state.dataSource,r=k.success;if(console.log("状态: "+(0===e?"失败":1===e?"完成":"成功")),0===e)r=k.failure;else if(1===e)r=k.complete;else for(var o=t.length,i=o;i<o+5;i++)t.push(D.a.createElement(s.a,{key:+i},"第 ",i+1," 行"));a.setState({dataSource:t,customLoading:r})}},2e3)},a.mounted=!0,a.state={customRefreshing:T.normal,customLoading:k.normal,dataSource:[]},a}return E()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.fetchData("customRefreshing")}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.customRefreshing,n=t.customLoading,i=t.dataSource,l=[],c=0;c<3;c++)l.push(D.a.createElement(s.a,{key:+c},"第 ",c+1," 行"));return D.a.createElement(S.a,{className:"pull-page"},D.a.createElement(y.a,{title:"上拉加载下拉刷新 Pull"}),D.a.createElement("main",null,D.a.createElement(o.a,null,D.a.createElement(o.a.Header,{title:"基本"}),D.a.createElement(o.a.Body,null,D.a.createElement(r.a,{refreshing:a,loading:n,onRefresh:function(){e.fetchData("customRefreshing")},onLoad:this.loadData},i)))),D.a.createElement(w.a,null))}}]),t}(b.Component);t.default=R},419:function(e,t,a){"use strict";var n=(a(267),a(284),a(279),a(420));a.n(n)},420:function(e,t){},421:function(e,t,a){"use strict";var n=a(268),r=a.n(n),o=a(64),s=a.n(o),i=a(65),l=a.n(i),c=a(66),u=a.n(c),f=a(67),d=a.n(f),m=a(68),p=a.n(m),h=a(0),v=a.n(h),g=a(422),E=a(266),b=a.n(E),D=a(282),S=a(288),y=a(285),w=a(278),N=function(e){function t(e){l()(this,t);var a=d()(this,(t.__proto__||s()(t)).call(this,e));return a.getScrollContainer=function(){return function(e){for(;e&&e.parentNode&&e.parentNode!==document.body;){if(["scroll","auto"].indexOf(window.getComputedStyle(e).overflowY||"")>-1)return e;e=e.parentNode}}(a.pull)||document.documentElement},a.onScroll=function(){var e=a.state,t=e.refreshState,n=e.loadState,r=a.props,o=r.onLoad,s=r.loadDistance,i=a.wrap,l=i.scrollHeight,c=i.scrollTop,u=i.clientHeight;"function"!=typeof o||t!==g.b.normal||n!==g.a.normal||l<=u||l-(c+document.body.scrollTop)-s>u||o()},a.onDragMove=function(e,t){var n=t.offsetY;if(!a.props.onRefresh||n<=0||n>0&&a.wrap.scrollTop+document.body.scrollTop>0||a.state.refreshState>=g.b.loading)return!1;e.preventDefault();var r=a.props,o=r.refreshDistance,s=r.refreshInitDistance,i=n/2,l=i-s<o?g.b.pull:g.b.drop;return a.doRefreshAction(l,i),!0},a.onDragEnd=function(e,t){var n=t.offsetY;e.preventDefault();var r=a.props.onRefresh,o=a.state.refreshState;if(n)return o===g.b.pull?void a.doRefreshAction(g.b.normal):void("function"==typeof r&&r())},a.doTransition=function(e){var t=e.offsetY,n=e.animationDuration;a.setState({offsetY:t,animationDuration:n})},a.doRefreshAction=function(e,t){var n=a.props,r=n.animationDuration,o=n.stayTime;switch(a.setState({refreshState:e}),e){case g.b.pull:case g.b.drop:a.doTransition({offsetY:t,animationDuration:0});break;case g.b.loading:a.doTransition({offsetY:"auto",animationDuration:r});break;case g.b.success:case g.b.failure:a.doTransition({offsetY:"auto",animationDuration:r}),setTimeout(function(){a.doRefreshAction(g.b.normal),a.doLoadAction(g.a.normal)},o);break;default:a.doTransition({offsetY:0,animationDuration:r})}},a.doLoadAction=function(e){var t=a.props.stayTime;switch(a.setState({loadState:e}),e){case g.a.success:a.doLoadAction(g.a.normal);break;case g.a.failure:setTimeout(function(){a.doLoadAction(g.a.abort)},t)}},a.renderRefresh=function(){var e=a.props,t=e.prefixCls,n=e.refreshInitDistance,r=e.refreshDistance,o=e.refreshRender,s=a.state,i=s.refreshState,l=s.offsetY,c=0;if(l>=n&&(c=100*(l-n<r?l-n:r)/r),"function"==typeof o)return o(i,c);var u=t+"-control";switch(i){case g.b.pull:return v.a.createElement("div",{className:u},v.a.createElement(y.a,{percent:c}),v.a.createElement("span",null,"下拉刷新"));case g.b.drop:return v.a.createElement("div",{className:u},v.a.createElement(y.a,{percent:100}),v.a.createElement("span",null,"释放立即刷新"));case g.b.loading:return v.a.createElement("div",{className:u},v.a.createElement(y.a,{className:"rotate360"}),v.a.createElement("span",null,"加载中"));case g.b.success:return v.a.createElement("div",{className:u},v.a.createElement(w.a,{type:"right-round",theme:"success"}),v.a.createElement("span",null,"加载成功"));case g.b.failure:return v.a.createElement("div",{className:u},v.a.createElement(w.a,{type:"wrong-round",theme:"error"}),v.a.createElement("span",null,"加载失败"))}},a.renderLoad=function(){var e=a.props,t=e.prefixCls,n=e.loadRender,r=a.state.loadState;if("function"==typeof n)return n(r);var o=t+"-control";switch(r){case g.a.loading:return v.a.createElement("div",{className:o},v.a.createElement(y.a,{className:"rotate360"}),v.a.createElement("span",null,"加载中"));case g.a.failure:return v.a.createElement("div",{className:o},v.a.createElement(w.a,{type:"wrong-round",theme:"error"}),v.a.createElement("span",null,"加载失败"));case g.a.complete:return v.a.createElement("div",{className:o},v.a.createElement("span",null,"我是有底线的"))}},a.state={offsetY:0,animationDuration:0,refreshState:e.refreshing,loadState:e.loading},a}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.wrap=this.getScrollContainer();var e=this.wrap===document.documentElement?window:this.wrap;D.a.on(e,"scroll",this.onScroll)}},{key:"componentWillReceiveProps",value:function(e){"refreshing"in e&&e.refreshing!==this.props.refreshing&&this.doRefreshAction(e.refreshing),"loading"in e&&e.loading!==this.props.loading&&this.doLoadAction(e.loading)}},{key:"componentWillUnmount",value:function(){var e=this.wrap===document.documentElement?window:this.wrap;D.a.off(e,"scroll",this.onScroll)}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.className,o=t.children,s=this.state,i=s.offsetY,l=s.animationDuration,c=s.refreshState,u=s.loadState,f=b()(a,n),d=b()(a+"-load",r()({},a+"-load-show",u>=g.a.loading)),m={WebkitTransition:"all "+l+"ms",transition:"all "+l+"ms"};return c<=g.b.drop&&(m.WebkitTransform="translate3d(0, "+i+"px, 0)",m.transform="translate3d(0, "+i+"px, 0)"),v.a.createElement(S.a,{onDragMove:this.onDragMove,onDragEnd:this.onDragEnd},v.a.createElement("div",{className:f},v.a.createElement("div",{className:a+"-content",style:m,ref:function(t){e.pull=t}},v.a.createElement("div",{className:a+"-refresh"},this.renderRefresh()),v.a.createElement("div",{className:a+"-body"},o),v.a.createElement("div",{className:d},this.renderLoad()))))}}]),t}(h.PureComponent);t.a=N,N.defaultProps={prefixCls:"za-pull",refreshing:g.b.normal,refreshInitDistance:30,refreshDistance:50,loading:g.a.normal,loadDistance:0,animationDuration:400,stayTime:1e3}},422:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n;!function(e){e[e.normal=0]="normal",e[e.pull=1]="pull",e[e.drop=2]="drop",e[e.loading=3]="loading",e[e.success=4]="success",e[e.failure=5]="failure"}(n||(n={}));var r;!function(e){e[e.normal=0]="normal",e[e.abort=1]="abort",e[e.loading=2]="loading",e[e.success=3]="success",e[e.failure=4]="failure",e[e.complete=5]="complete"}(r||(r={}))},423:function(e,t){}});